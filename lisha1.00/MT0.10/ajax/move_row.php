<?php
	/**==================================================================
	 * MagicTree configuration ( Need active php session and ssid definition )
	 ====================================================================*/
	require('header_ajax.php');
	/*===================================================================*/		
	
	//==================================================================
	// mode :
	// B : Brother, C : Children
	//==================================================================
	if(!isset($_POST["mode"]))
	{
		error_log_details('fatal','you have to define a mode');
		die();
	}
	$mode = $_POST["mode"];
	//==================================================================

		
	//==================================================================
	// Get node source id
	//==================================================================
	if(!isset($_POST["source_id"]))
	{
		error_log_details('fatal','you need a source id');
		die();
	}
	$id_source= $_POST["source_id"];
	//==================================================================

	//==================================================================
	// Get node target id
	//==================================================================
	if(!isset($_POST["target_id"]))
	{
		error_log_details('fatal','you need a target id');
		die();
	}
	$id_target= $_POST["target_id"];
	//==================================================================

	$_SESSION[$ssid]['MT'][$tree_id]->move_node($mode,$id_source,$id_target);
?>